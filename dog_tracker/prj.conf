# Copyright (c) 2024 Dog Tracker Project
# SPDX-License-Identifier: Apache-2.0

# 基础配置
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3

# 日志配置 - 使用默认级别

# 蓝牙配置
CONFIG_BT=y
CONFIG_BT_CENTRAL=n
CONFIG_BT_PERIPHERAL=y

# GATT相关
CONFIG_BT_GATT_SERVICE_CHANGED=y
CONFIG_BT_GATT_CACHING=y
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# 安全性配置
CONFIG_BT_SMP=y
CONFIG_BT_SIGNING=y
CONFIG_BT_BONDABLE=y
CONFIG_BT_BONDING_REQUIRED=n

# L2CAP配置
CONFIG_BT_L2CAP_TX_BUF_COUNT=8

# 设备名称和ID
CONFIG_BT_DEVICE_NAME="Dog_Tracker"
CONFIG_BT_DEVICE_APPEARANCE=0

# 蓝牙控制器配置
CONFIG_BT_CTLR=y
CONFIG_BT_CTLR_ADV_EXT=y
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# 广播配置
CONFIG_BT_EXT_ADV=y

# 内存配置
CONFIG_HEAP_MEM_POOL_SIZE=16384
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# 设置存储
CONFIG_SETTINGS=y
CONFIG_SETTINGS_RUNTIME=y  # 启用运行时Settings API
CONFIG_SETTINGS_NVS=y
CONFIG_NVS=y
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y

# CBOR支持（用于数据编解码）
CONFIG_ZCBOR=y
CONFIG_ZCBOR_CANONICAL=y

# 随机数生成
CONFIG_ENTROPY_GENERATOR=y

# GPIO和定时器支持
CONFIG_GPIO=y
CONFIG_COUNTER=y

# Shell支持（调试用）
CONFIG_SHELL=y
CONFIG_SHELL_BACKEND_SERIAL=y

# UART配置
CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_CONSOLE=y

# 看门狗
CONFIG_WATCHDOG=y

# ===== 新增配置以解决编译错误 =====

# JSON支持 (解决 cJSON_os.h 错误)
CONFIG_CJSON_LIB=y
# 需要启用浮点printf支持
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y

# 文件系统支持 (解决 lfs.h 错误)
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y

# 传感器支持 (解决 imu.h 相关问题)
CONFIG_SENSOR=y
CONFIG_I2C=y
CONFIG_SPI=y

# ZBUS消息总线支持 (项目使用的消息系统)
CONFIG_ZBUS=y
CONFIG_ZBUS_CHANNEL_NAME=y
CONFIG_ZBUS_OBSERVER_NAME=y
CONFIG_ZBUS_MSG_SUBSCRIBER=y

# 网络缓冲支持 (ZBUS和通信需要)
CONFIG_NET_BUF=y

# 线程名称支持 (便于调试)
CONFIG_THREAD_NAME=y

# ML相关支持
CONFIG_CPP=y
CONFIG_STD_CPP17=y

# 调制解调器支持
CONFIG_MODEM_MODULES=y

# WiFi支持
CONFIG_WIFI=y
CONFIG_NET_L2_WIFI_MGMT=y

# ===== 添加项目特定配置参数 =====

# 日志级别配置
#CONFIG_SPI_MODEM_LOG_LEVEL=3
#CONFIG_D1_JSON_LOG_LEVEL=3
#CONFIG_COMM_MGR_LOG_LEVEL=3
#CONFIG_ML_LOG_LEVEL=3
#CONFIG_IMU_LOG_LEVEL=3

# MQTT和IoT配置
#CONFIG_IOT_MQTT_REGION_ID="US"
#CONFIG_IOT_MQTT_BRAND_ID=123
#CONFIG_MAX_MQTT_MSG_SIZE=4096

# 调制解调器配置  
#CONFIG_NRF9160_ENABLE_ON_BOOT=n

# SPI配置（针对nRF54L15芯片）
CONFIG_SPI=y
CONFIG_SPI_NRFX=y

# 应用版本配置
#CONFIG_APP_VERSION_MAJOR_CMAKE=1
#CONFIG_APP_VERSION_MINOR_CMAKE=0  
#CONFIG_APP_VERSION_PATCH_CMAKE=0

# 机器学习配置
#CONFIG_ML_ENABLE=y

# 构建配置
#CONFIG_BUILDING_MFG_SHELL=n
CONFIG_NETWORKING=y